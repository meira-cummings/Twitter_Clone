{% extends "base.html" %} {% block content %} {% load static %} {% load cloudinary %}
<section class="main">
    <div class="main-header">
        <img src="/static/img/techis-logo.png" class="logo" />
        <h1>Home</h1>
    </div>
</section>
<section class="content">
    <section class="post_form">
        <img src="/static/img/user.png" class="my_icon" />
            <form action="/" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="text" name="name" placeholder="Your Name" class="input" required />
                <textarea name="body" placeholder="What's happening?" required></textarea>                
                <div class="bottom-area">                    
                    <input class="form-control" type="file" id="formFile" />                                      
                    <input type="submit" value="Tweet" id="tweet" />
                </div>
            </form>
    </section>
    <div class="ditch"></div>

    <section class="posts">
        <ul>
            {% for post in posts %}
            <li>
                <img class="menu_icon js-menu-icon" src="{% static 'img/menu.png' %}" />
                <div class="menu">
                    <a href = "/delete/{{ post.id }}/">Delete</a><br><br>
                    <a href = "/edit/{{ post.id }}/">Edit</a>
                </div>
                <div class="logo">
                    <img src="{% static 'img/user.png' %}" />
                </div>
                <div class="name_body">
                    <span class="name">{{post.name}}</span>
                    <span class="datetime">{{post.created_at}}</span>
                    <p>{{post.body}}</p>

                    <div>
                        <img src="{{ post.image.url }}" class="pic"                         
                        style="max-width: 400px; max-height: 370px; border-radius: 15px;"
                        onclick="window.open(this.src, '_blank');">
                    </div>

                    <form id="likes-form" action="{% url 'like_post' post.pk %}" method='POST'>
                        {% csrf_token %}                                                                                                                          
                        <button class="like-btn" type="submit", name="post_id", value="{{ post.id }}" href="post_id">
                            <img src="{% static 'img/heart.png' %}" class="heart-btn">              
                        </button>
                        {{post.likes}}                                          
                    </form>           
                </div>
            </li>
            {% endfor %}
        </ul>        
    </section>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="{% static 'js/posts.js' %}"></script>
</section>

{% endblock %}
